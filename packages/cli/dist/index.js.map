{"version":3,"sources":["../src/index.ts","../src/commands/new.ts","../package.json"],"sourcesContent":["#!/usr/bin/env node\n\nimport { cac } from 'cac';\nimport { newCommand } from './commands/new';\nimport { version } from '../package.json';\n\nconst cli = cac('japavel');\n\ncli\n  .command('new <project-name>', 'Create a new Japavel project')\n  .action((projectName) => {\n    newCommand(projectName);\n  });\n\ncli.help();\ncli.version(version);\n\ncli.parse();\n","import fs from 'fs-extra';\nimport path from 'path';\nimport chalk from 'chalk';\nimport inquirer from 'inquirer';\nimport { fileURLToPath } from 'url';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nexport async function newCommand(projectName: string) {\n  const targetDir = path.resolve(process.cwd(), projectName);\n\n  if (fs.existsSync(targetDir)) {\n    console.error(chalk.red(`Error: Directory ${projectName} already exists.`));\n    process.exit(1);\n  }\n\n  console.log(chalk.blue(`\\nCreating a new Japavel project in ${chalk.bold(targetDir)}...\\n`));\n\n  // In a real scenario, we might ask for template selection\n  // const { template } = await inquirer.prompt([\n  //   {\n  //     type: 'list',\n  //     name: 'template',\n  //     message: 'Select a template:',\n  //     choices: ['default'],\n  //   },\n  // ]);\n\n  const templateDir = path.resolve(__dirname, '../templates/default');\n\n  if (!fs.existsSync(templateDir)) {\n      console.error(chalk.red(`Error: Template not found at ${templateDir}`));\n      process.exit(1);\n  }\n\n  try {\n    await fs.copy(templateDir, targetDir);\n\n    // Update package.json name\n    const packageJsonPath = path.join(targetDir, 'package.json');\n    if (fs.existsSync(packageJsonPath)) {\n      const pkg = await fs.readJson(packageJsonPath);\n      pkg.name = projectName;\n      await fs.writeJson(packageJsonPath, pkg, { spaces: 2 });\n    }\n\n    console.log(chalk.green(`\\nSuccess! Created ${projectName} at ${targetDir}\\n`));\n    console.log('Inside that directory, you can run:\\n');\n    console.log(chalk.cyan(`  cd ${projectName}`));\n    console.log(chalk.cyan(`  npm install`));\n    console.log(chalk.cyan(`  npm run dev`));\n    console.log('\\nHappy coding!\\n');\n\n  } catch (err) {\n    console.error(chalk.red('Error creating project:'), err);\n    process.exit(1);\n  }\n}\n","{\n  \"name\": \"@japavel/cli\",\n  \"version\": \"0.0.1\",\n  \"description\": \"CLI for Japavel Framework\",\n  \"bin\": {\n    \"japavel\": \"./dist/index.js\"\n  },\n  \"scripts\": {\n    \"build\": \"tsup\",\n    \"dev\": \"tsup --watch\",\n    \"start\": \"node dist/index.js\",\n    \"lint\": \"eslint .\"\n  },\n  \"dependencies\": {\n    \"cac\": \"^6.7.14\",\n    \"chalk\": \"^5.3.0\",\n    \"fs-extra\": \"^11.2.0\",\n    \"inquirer\": \"^9.2.14\"\n  },\n  \"devDependencies\": {\n    \"@types/fs-extra\": \"^11.0.4\",\n    \"@types/inquirer\": \"^9.0.7\",\n    \"@types/node\": \"^20.11.0\",\n    \"tsup\": \"^8.0.1\",\n    \"typescript\": \"^5.3.0\"\n  },\n  \"type\": \"module\"\n}\n"],"mappings":";;;AAEA,SAAS,WAAW;;;ACFpB,OAAO,QAAQ;AACf,OAAO,UAAU;AACjB,OAAO,WAAW;AAElB,SAAS,qBAAqB;AAE9B,IAAM,aAAa,cAAc,YAAY,GAAG;AAChD,IAAM,YAAY,KAAK,QAAQ,UAAU;AAEzC,eAAsB,WAAW,aAAqB;AACpD,QAAM,YAAY,KAAK,QAAQ,QAAQ,IAAI,GAAG,WAAW;AAEzD,MAAI,GAAG,WAAW,SAAS,GAAG;AAC5B,YAAQ,MAAM,MAAM,IAAI,oBAAoB,WAAW,kBAAkB,CAAC;AAC1E,YAAQ,KAAK,CAAC;AAAA,EAChB;AAEA,UAAQ,IAAI,MAAM,KAAK;AAAA,oCAAuC,MAAM,KAAK,SAAS,CAAC;AAAA,CAAO,CAAC;AAY3F,QAAM,cAAc,KAAK,QAAQ,WAAW,sBAAsB;AAElE,MAAI,CAAC,GAAG,WAAW,WAAW,GAAG;AAC7B,YAAQ,MAAM,MAAM,IAAI,gCAAgC,WAAW,EAAE,CAAC;AACtE,YAAQ,KAAK,CAAC;AAAA,EAClB;AAEA,MAAI;AACF,UAAM,GAAG,KAAK,aAAa,SAAS;AAGpC,UAAM,kBAAkB,KAAK,KAAK,WAAW,cAAc;AAC3D,QAAI,GAAG,WAAW,eAAe,GAAG;AAClC,YAAM,MAAM,MAAM,GAAG,SAAS,eAAe;AAC7C,UAAI,OAAO;AACX,YAAM,GAAG,UAAU,iBAAiB,KAAK,EAAE,QAAQ,EAAE,CAAC;AAAA,IACxD;AAEA,YAAQ,IAAI,MAAM,MAAM;AAAA,mBAAsB,WAAW,OAAO,SAAS;AAAA,CAAI,CAAC;AAC9E,YAAQ,IAAI,uCAAuC;AACnD,YAAQ,IAAI,MAAM,KAAK,QAAQ,WAAW,EAAE,CAAC;AAC7C,YAAQ,IAAI,MAAM,KAAK,eAAe,CAAC;AACvC,YAAQ,IAAI,MAAM,KAAK,eAAe,CAAC;AACvC,YAAQ,IAAI,mBAAmB;AAAA,EAEjC,SAAS,KAAK;AACZ,YAAQ,MAAM,MAAM,IAAI,yBAAyB,GAAG,GAAG;AACvD,YAAQ,KAAK,CAAC;AAAA,EAChB;AACF;;;ACxDE,cAAW;;;AFIb,IAAM,MAAM,IAAI,SAAS;AAEzB,IACG,QAAQ,sBAAsB,8BAA8B,EAC5D,OAAO,CAAC,gBAAgB;AACvB,aAAW,WAAW;AACxB,CAAC;AAEH,IAAI,KAAK;AACT,IAAI,QAAQ,OAAO;AAEnB,IAAI,MAAM;","names":[]}