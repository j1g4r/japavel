# ==============================================================================
# Japavel Backend - Environment Configuration Template
# ==============================================================================
# Copy this file to .env and fill in the actual values for your environment.
# NEVER commit .env file to version control as it contains sensitive data.
# ==============================================================================

# ------------------------------------------------------------------------------
# GENERAL CONFIGURATION
# ------------------------------------------------------------------------------

# Node environment (development | production | test)
NODE_ENV=development

# Application name and version
APP_NAME=japavel-backend
APP_VERSION=0.0.1

# ------------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ------------------------------------------------------------------------------

# Database connection string
# PostgreSQL: postgresql://user:password@host:port/database
# MySQL: mysql://user:password@host:port/database
# SQLite: file:./path/to/database.db
DATABASE_URL=postgresql://japavel:password@localhost:5432/japavel?schema=public

# Prisma schema path
PRISMA_SCHEMA_PATH=./src/prisma/schema.prisma

# Database connection pool settings
DATABASE_POOL_MAX=10
DATABASE_POOL_MIN=2
DATABASE_CONNECTION_TIMEOUT=10000

# ------------------------------------------------------------------------------
# REDIS CONFIGURATION
# ------------------------------------------------------------------------------

# Redis connection URL (required for production session storage)
REDIS_URL=redis://192.168.0.167:6379

# Redis retry settings
REDIS_MAX_RETRIES=3
REDIS_RETRY_DELAY=50

# Enable Redis (true | false)
REDIS_ENABLED=false

# ------------------------------------------------------------------------------
# SECURITY CONFIGURATION
# ------------------------------------------------------------------------------

# Encryption key (must be at least 32 characters, base64 encoded)
# Generate with: openssl rand -base64 32
ENCRYPTION_KEY=GENERATE_A_32_CHAR_BASE64_ENCRYPTION_KEY_HERE

# Encryption salt (optional, recommended for production)
# Generate with: openssl rand -hex 16
ENCRYPTION_SALT=GENERATE_A_16_CHAR_HEX_SALT_HERE

# JWT secret for token signing (must be at least 32 characters)
# Generate with: openssl rand -base64 48
JWT_SECRET=GENERATE_A_STRONG_32_CHAR_JWT_SECRET_HERE

# Session configuration
SESSION_EXPIRATION=86400
MAX_SESSIONS_PER_USER=5

# Bcrypt rounds for password hashing (4-12, higher is more secure but slower)
BCRYPT_ROUNDS=12

# ------------------------------------------------------------------------------
# SERVER CONFIGURATION
# ------------------------------------------------------------------------------

# Server port
PORT=3000

# Server host (0.0.0.0 to listen on all interfaces)
HOST=0.0.0.0

# Trust proxy headers (true | false)
# Set to true when behind a load balancer/reverse proxy
TRUST_PROXY=true

# ------------------------------------------------------------------------------
# CORS CONFIGURATION
# ------------------------------------------------------------------------------

# Allowed origins (comma-separated, use * for all origins)
# Examples: http://localhost:5173,https://app.example.com
ALLOWED_ORIGINS=http://localhost:5173

# Allow credentials (true | false)
CORS_CREDENTIALS=true

# Allowed HTTP methods (comma-separated)
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,PATCH

# Allowed headers (comma-separated)
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# CORS max age (in seconds)
CORS_MAX_AGE=86400

# ------------------------------------------------------------------------------
# RATE LIMITING CONFIGURATION
# ------------------------------------------------------------------------------

# Authentication rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_ATTEMPTS=5

# General API rate limiting
RATE_LIMIT_GENERAL_WINDOW_MS=60000
RATE_LIMIT_GENERAL_MAX_REQUESTS=100

# Rate limit lockout duration (in milliseconds)
RATE_LIMIT_LOCKOUT_DURATION=1800000

# ------------------------------------------------------------------------------
# LOGGING CONFIGURATION
# ------------------------------------------------------------------------------

# Log level (error | warn | info | debug)
LOG_LEVEL=info

# Log directory (relative to project root)
LOG_DIR=./logs

# Enable console logging (true | false)
LOG_CONSOLE=true

# Enable file logging (true | false)
LOG_FILE=true

# Maximum number of log files to keep
LOG_MAX_FILES=10

# Maximum size of each log file (e.g., 50m, 100m)
LOG_MAX_SIZE=50m

# ------------------------------------------------------------------------------
# MCP SERVER CONFIGURATION
# ------------------------------------------------------------------------------

# Enable MCP server (true | false)
MCP_ENABLED=false

# MCP server port
MCP_PORT=3001

# MCP allowed origins (comma-separated)
MCP_ALLOWED_ORIGINS=*

# ------------------------------------------------------------------------------
# OPTIONAL: EXTERNAL SERVICES
# ------------------------------------------------------------------------------

# email service (e.g., SendGrid, AWS SES)
EMAIL_SERVICE_API_KEY=
EMAIL_FROM_ADDRESS=

# SMS service (e.g., Twilio)
SMS_SERVICE_API_KEY=
SMS_SERVICE_FROM_NUMBER=

# File storage (e.g., AWS S3)
STORAGE_ACCESS_KEY=
STORAGE_SECRET_KEY=
STORAGE_BUCKET=
STORAGE_REGION=

# Analytics (e.g., Google Analytics)
ANALYTICS_ID=

# Error tracking (e.g., Sentry)
SENTRY_DSN=

# ------------------------------------------------------------------------------
# OPTIONAL: IP FILTERING
# ------------------------------------------------------------------------------

# Comma-separated list of trusted IP addresses
# These IPs bypass rate limiting
TRUSTED_IPS=127.0.0.1,::1

# Comma-separated list of blocked IP addresses
BLOCKED_IPS=

# ------------------------------------------------------------------------------
# NOTES
# ------------------------------------------------------------------------------
#
# 1. Generate secure keys using OpenSSL:
#    - Encryption key: openssl rand -base64 32
#    - JWT secret: openssl rand -base64 48
#    - Encryption salt: openssl rand -hex 16
#
# 2. Never commit .env file to version control
#    - Make sure .env is in .gitignore
#    - Use .env.example as a template
#
# 3. Use different values for development and production
#    - Never share secrets across environments
#
# 4. Rotate secrets regularly
#    - Update keys every 90 days for production
#    - Rotate immediately if compromised
#
# 5. Store secrets securely in production
#    - Use secrets manager (e.g., AWS Secrets Manager, HashiCorp Vault)
#    - Don't hardcode secrets in application code
#
# 6. Test configuration before deployment
#    - Ensure all required variables are set
#    - Validate connection strings work
#    - Test with NODE_ENV=production
#
# ==============================================================================
